{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\acapo\\\\Desktop\\\\Programacion Avanzada\\\\Tp1 front\\\\programacionAvanzadaTP1Front\\\\src\\\\Pages\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport '../css/App.css';\nimport Board from '../components/Board/Board';\nimport NavBar from '../components/NavBar/NavBar';\nimport ScoreBoard from '../components/ScoreBoard/ScoreBoard';\nimport { useState } from 'react';\nimport { useParams } from 'react-router';\nimport Cookies from 'universal-cookie';\nimport useTable from '../hooks/useTable';\nimport Spinner from 'react-bootstrap/Spinner';\nimport setSquareValue from '../api/table/setSquarevalue';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst cookie = new Cookies();\nconst token = cookie.get('authToken');\nconst playerId = cookie.get('playerId');\n\nfunction refreshTable(positions, playerId) {\n  let players = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  let renderFlag = arguments.length > 3 ? arguments[3] : undefined;\n  const auxArr = Array(9).fill(0);\n\n  if (players.length > 0) {\n    positions.forEach(p => auxArr[p.box] = p.player_id === parseInt(playerId) ? players.find(p => p.id === parseInt(playerId)).symbol : players.find(p => p.id !== parseInt(playerId)).symbol);\n  }\n\n  if (renderFlag) {\n    return auxArr;\n  }\n\n  return false;\n}\n\nconst App = () => {\n  _s();\n\n  const tablaId = useParams(); // console.log('tablaId => ',tablaId.id)\n\n  const {\n    table\n  } = useTable(token, tablaId.id);\n  const [turn, setTurn] = useState('X');\n  const [moveNumber, setMoveNumber] = useState(0);\n  const [squares, setSquares] = useState(Array(9).fill(0));\n  const [winningSquares, setwinningSquares] = useState([]);\n  const [score, setScore] = useState({\n    X: 0,\n    O: 0\n  });\n  const playerSymbol = table ? table.players.filter(p => p.id === parseInt(playerId))[0].symbol : '';\n  const positionsToRender = table ? table.positions : Array(9).fill(0);\n  const renderFlag = table ? table.table.move_number === moveNumber : false;\n  const players = table ? table.players : [];\n  const refreshStatus = refreshTable(positionsToRender, playerId, players, renderFlag);\n\n  if (refreshStatus) {\n    setSquares(refreshStatus);\n    setMoveNumber(moveNumber + 1);\n    setTurn(playerSymbol);\n  }\n\n  const actualPlayer = table && table.players ? table.players.filter(p => p.id === table.table.curret_player)[0].symbol : 'O';\n  const winner = table && table.players.filter(p => p.id === table.table.winner)[0];\n  const gameReady = table ? true : false;\n\n  const reset = () => {\n    setTurn('');\n    setSquares(Array(9).fill(0));\n    setwinningSquares([]);\n  };\n\n  const checkWinner = newSquares => {// TODO: No implementado\n  };\n\n  const endGame = (result, winnerPositions) => {// TODO: No implementado\n  }; //console.log('squares ===> ',squares)\n\n\n  const handleCklick = square => {\n    setTurn(playerSymbol);\n    let newSquares = [...squares];\n    newSquares.splice(square, 1, turn);\n    setSquareValue(token, tablaId.id, square).then(() => {\n      setSquares(newSquares);\n    });\n  };\n\n  return gameReady ? /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar\",\n      children: /*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Board, {\n        turn: turn,\n        squares: squares,\n        onClick: handleCklick,\n        winningSquares: winningSquares\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ScoreBoard, {\n        scoreO: score.O,\n        scoreX: score.X\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 5\n      }, this), winner ? /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"El ganador es: \", winner.symbol]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Juega: \", actualPlayer]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 56\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar\",\n      children: /*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Waiting for a player\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        variant: \"light\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"I4NDqQFonC69KgQp/liKdfpnQBY=\", false, function () {\n  return [useParams, useTable];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["Board","NavBar","ScoreBoard","useState","useParams","Cookies","useTable","Spinner","setSquareValue","cookie","token","get","playerId","refreshTable","positions","players","renderFlag","auxArr","Array","fill","length","forEach","p","box","player_id","parseInt","find","id","symbol","App","tablaId","table","turn","setTurn","moveNumber","setMoveNumber","squares","setSquares","winningSquares","setwinningSquares","score","setScore","X","O","playerSymbol","filter","positionsToRender","move_number","refreshStatus","actualPlayer","curret_player","winner","gameReady","reset","checkWinner","newSquares","endGame","result","winnerPositions","handleCklick","square","splice","then"],"sources":["C:/Users/acapo/Desktop/Programacion Avanzada/Tp1 front/programacionAvanzadaTP1Front/src/Pages/App.js"],"sourcesContent":["import '../css/App.css';\r\nimport Board from '../components/Board/Board';\r\nimport NavBar from '../components/NavBar/NavBar';\r\nimport ScoreBoard from '../components/ScoreBoard/ScoreBoard';\r\nimport { useState } from 'react';\r\nimport { useParams } from 'react-router';\r\nimport Cookies from 'universal-cookie';\r\nimport useTable from '../hooks/useTable'\r\n\r\nimport Spinner from 'react-bootstrap/Spinner'\r\nimport setSquareValue from '../api/table/setSquarevalue'\r\n\r\n\r\nconst cookie = new Cookies();\r\nconst token = cookie.get('authToken');\r\nconst playerId = cookie.get('playerId');\r\n\r\nfunction refreshTable(positions,playerId,players=[],renderFlag){\r\n  const auxArr = Array(9).fill(0);\r\n  if(players.length > 0){\r\n    positions.forEach((p) =>\r\n    auxArr[p.box] = p.player_id === parseInt(playerId) ? \r\n                      players.find((p) => p.id === parseInt(playerId)).symbol : \r\n                      players.find((p) => p.id !== parseInt(playerId)).symbol\r\n  )\r\n\r\n  }\r\n\r\n  if(renderFlag){\r\n    return auxArr\r\n  }\r\n  return false;\r\n}\r\n\r\n\r\nconst App = () => {\r\n  const tablaId = useParams()\r\n  // console.log('tablaId => ',tablaId.id)\r\n  \r\n  const {table} = useTable(token,tablaId.id);\r\n  const [turn,setTurn] = useState('X');\r\n  const [moveNumber,setMoveNumber] = useState(0);\r\n  const [squares,setSquares] = useState(Array(9).fill(0));\r\n  const [winningSquares,setwinningSquares] = useState([]);\r\n  const [score,setScore] = useState({\r\n    X: 0,\r\n    O: 0,\r\n  });\r\n\r\n  const playerSymbol = table ? table.players.filter((p) => p.id === parseInt(playerId))[0].symbol : '';\r\n  const positionsToRender = table ? table.positions : Array(9).fill(0);\r\n  const renderFlag = table ? table.table.move_number ===  moveNumber : false\r\n  const players = table ? table.players : [];\r\n  const refreshStatus = refreshTable(positionsToRender,playerId,players,renderFlag);\r\n\r\n  if(refreshStatus){\r\n    setSquares(refreshStatus)\r\n    setMoveNumber(moveNumber+1)\r\n    setTurn(playerSymbol)\r\n\r\n  }\r\n\r\n  \r\n  const actualPlayer = table && table.players ? table.players.filter((p) => p.id === table.table.curret_player)[0].symbol :'O';\r\n\r\n  const winner =  table &&  table.players.filter((p) => p.id === table.table.winner)[0];\r\n  const gameReady = table ? true : false\r\n\r\n  const reset = () =>{\r\n    setTurn('');\r\n    setSquares(Array(9).fill(0));\r\n    setwinningSquares([])\r\n  }\r\n  const checkWinner = newSquares =>{\r\n    // TODO: No implementado\r\n  }\r\n  \r\n  const endGame = (result,winnerPositions) => {\r\n    // TODO: No implementado\r\n  }\r\n  //console.log('squares ===> ',squares)\r\n\r\n  const handleCklick  = square=> {\r\n      setTurn(playerSymbol)\r\n      let newSquares = [...squares];\r\n      newSquares.splice(square,1,turn);\r\n      setSquareValue(token,tablaId.id,square).then(() => {\r\n        setSquares(newSquares);\r\n      });\r\n    \r\n\r\n\r\n  }\r\n\r\n\r\n  return gameReady ? (\r\n    <div>\r\n    <div className='navbar'>\r\n    <NavBar></NavBar>\r\n    </div>\r\n    <div className='container'>\r\n    <Board turn={turn} squares={squares} onClick={handleCklick} winningSquares={winningSquares}/>\r\n    <ScoreBoard scoreO={score.O} scoreX={score.X} />\r\n    <br></br>\r\n    {winner ? <h1>El ganador es: {winner.symbol}</h1> :<h1>Juega: {actualPlayer}</h1>}\r\n    </div>\r\n    </div>\r\n  ) :\r\n  (\r\n    <div>\r\n    <div className='navbar'>\r\n    <NavBar></NavBar>\r\n    </div>\r\n    <div className='container'>\r\n    <h1>Waiting for a player</h1>\r\n    <Spinner animation=\"border\" role=\"status\" variant=\"light\">\r\n      {/* <span className=\"visually-hidden\">Loading...</span> */}\r\n    </Spinner>\r\n    </div>\r\n    </div>\r\n  )\r\n  ;\r\n}\r\n\r\n\r\n\r\nexport default App; \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}